# ============================================
# CONFIGURACIÓN - MHW DEV (Tu Cloud Personal)
# ============================================
# Última actualización: 2025-11-15

# ============================================
# PROYECTO GCP
# ============================================
export GCP_PROJECT_ID="ticket-home-demo"
export GCP_REGION="us-central1"
export GCP_ZONE="us-central1-c"

# ============================================
# APLICACIÓN
# ============================================
export APP_NAME="ticket-home"
export SERVICE_NAME="tickethome-demo"
export ENVIRONMENT="mhw-dev"

# ============================================
# DOMINIO Y DNS
# ============================================
export DOMAIN_NAME="ticket-home-beta.mhwdev.dev"
export RESERVED_IP_NAME="${SERVICE_NAME}-ip"
export STATIC_IP="34.8.122.103"  # Ya reservada

# ============================================
# CLOUD SQL
# ============================================
export CLOUDSQL_INSTANCE_NAME="tickethome-db"
export CLOUDSQL_INSTANCE_CONNECTION_NAME="${GCP_PROJECT_ID}:${GCP_REGION}:${CLOUDSQL_INSTANCE_NAME}"
export CLOUDSQL_PUBLIC_IP="34.60.42.106"
export CLOUDSQL_PORT="5432"

# Nueva Base de Datos
export DB_NAME="mhw_ticket_home"
export DB_USER="mhw_user"
export DB_PASSWORD="ZHB5ChBBB3IWRLSi8WvQhrBkuQFUljQNMBlStNTkQJM"

# ============================================
# SECRETS EN SECRET MANAGER
# ============================================
export SECRET_DATABASE_URL_NAME="mhw-database-url"
export SECRET_KEY_NAME="mhw-secret-key"
export SECRET_SUPERUSER_EMAILS_NAME="mhw-superuser-emails"

# Valores (para creación inicial)
export SECRET_KEY="c89554257e2e8b5794f76745a5c810d9cfa359a0e15d56cd7013f6ee4c402ef6"
export SUPERUSER_EMAILS="jonathan.segura.vega@gmail.com"

# ============================================
# DOCKER & ARTIFACT REGISTRY
# ============================================
export ARTIFACT_REGISTRY_REGION="us-central1"
export ARTIFACT_REGISTRY_REPO="tickethome-repo"
export IMAGE_NAME="${ARTIFACT_REGISTRY_REGION}-docker.pkg.dev/${GCP_PROJECT_ID}/${ARTIFACT_REGISTRY_REPO}/${APP_NAME}"
export IMAGE_TAG="latest"

# ============================================
# SERVICE ACCOUNT
# ============================================
export SERVICE_ACCOUNT_NAME="${SERVICE_NAME}-sa"
export SERVICE_ACCOUNT_EMAIL="${SERVICE_ACCOUNT_NAME}@${GCP_PROJECT_ID}.iam.gserviceaccount.com"

# ============================================
# CLOUD RUN - CONFIGURACIÓN
# ============================================
export CLOUD_RUN_MIN_INSTANCES="0"  # Escala a cero para ahorrar costos
export CLOUD_RUN_MAX_INSTANCES="3"
export CLOUD_RUN_MEMORY="1Gi"
export CLOUD_RUN_CPU="2"
export CLOUD_RUN_TIMEOUT="900"
export CLOUD_RUN_CONCURRENCY="80"
export CLOUD_RUN_PORT="8080"

# ============================================
# VARIABLES DE ENTORNO DE LA APLICACIÓN
# ============================================
export FLASK_ENV="development"
export FLASK_DEBUG="false"
export ENABLE_IAP="true"
export ENABLE_DEMO_LOGIN="true"
export RESET_DB_ON_STARTUP="false"

# ============================================
# LOAD BALANCER - COMPONENTES
# ============================================
export NEG_NAME="${SERVICE_NAME}-neg"
export BACKEND_SERVICE_NAME="${SERVICE_NAME}-backend"
export URL_MAP_NAME="${SERVICE_NAME}-url-map"
export SSL_CERT_NAME="${SERVICE_NAME}-ssl"
export HTTPS_PROXY_NAME="${SERVICE_NAME}-https-proxy"
export FORWARDING_RULE_NAME="${SERVICE_NAME}-forwarding-rule"

# ============================================
# GOOGLE GROUPS (IAP)
# ============================================
export IAP_ACCESS_GROUP="ticket-home-demo@googlegroups.com"

# ============================================
# NOTAS
# ============================================
# - Este es tu ambiente principal de desarrollo cloud
# - Min instances = 0 para ahorrar costos (escala a cero cuando no se usa)
# - Conexión a Cloud SQL via Cloud SQL Proxy (Unix socket)
# - No usa VPC Connector (más simple)
# - Región us-central1 (puede ser diferente a empresa por costos/disponibilidad)
